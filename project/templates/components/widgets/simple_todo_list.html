<div class="widget todoList">
    <div class="widget--header">
        <h3>{{ widget.title }}</h3>
        <button class="widget--addTask" title="Add New Task">+</button>
    </div>
     {% if widget.tasks.all != 0 %}
        {% for task in widget.tasks.all %}
            <div class="task {% if task.completed %}completed{% else %}pending{% endif %}">
                <input id="checkox_{{ task.id}}" type="checkbox" class="taskCheckbox" {% if task.completed %}checked{% endif %}>
                <span class="taskTitle">{{ task.title }}</span>
            </div>
        {% endfor %}

    {% endif %}
    <div class="progressBar">
        <div></div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function(){
        const checkboxs = document.querySelectorAll('.taskCheckbox');

        checkboxs.forEach(function(checkbox){
            checkbox.addEventListener('click', function(event) {
                const taskDiv = event.target.parentElement;
                console.log(taskDiv)
                if (taskDiv) {
                    if (event.target.checked) {
                        taskDiv.classList.remove('pending');
                        taskDiv.classList.add('completed');

                    }else {
                        taskDiv.classList.remove('completed');
                        taskDiv.classList.add('pending');
                    }
                }else{
                    console.log("'element task non trouv√©")
                }
            })
        })


    })

</script>